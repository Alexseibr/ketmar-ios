PROMPT: Heatmap –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ —Å–ø—Ä–æ—Å–∞ –ø–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—é –ø—Ä–æ–¥–∞–≤—Ü–∞
–ü—Ä–æ–µ–∫—Ç: KETMAR Market (–≥–µ–æ–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å, —É–∂–µ –µ—Å—Ç—å –∫–∞—Ä—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ Leaflet + OSM, –ª–æ–≥–∏–Ω, —Ä–æ–ª–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å/–ø—Ä–æ–¥–∞–≤–µ—Ü).

–¶–µ–ª—å:
–°–¥–µ–ª–∞—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Ç–µ–ø–ª–æ–≤—É—é –∫–∞—Ä—Ç—É –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ –µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—é.

–°—Ü–µ–Ω–∞—Ä–∏–π UX:
1. –ü—Ä–æ–¥–∞–≤–µ—Ü –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–≤–æ—é –∫–∞—Ä—Ç–æ—á–∫—É –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.
2. –í –±–ª–æ–∫–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –µ—Å—Ç—å –∏–∫–æ–Ω–∫–∞ üëÅ (–≥–ª–∞–∑), —Ä—è–¥–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: 127".
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –Ω–∞–∂–∞—Ç–∏–∏:
   ‚Äì –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É: 
     ¬´–í—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å, —Å –∫–∞–∫–∏—Ö —Ä–∞–π–æ–Ω–æ–≤ –≥–æ—Ä–æ–¥–∞ –ª—é–¥–∏ —á–∞—â–µ –≤—Å–µ–≥–æ —Å–º–æ—Ç—Ä—è—Ç –≤–∞—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ¬ª.
   ‚Äì –∑–∞—Ç–µ–º –æ—Ç–∫—Ä—ã—Ç—å —ç–∫—Ä–∞–Ω/–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∫–∞—Ä—Ç–æ–π.
4. –ù–∞ –∫–∞—Ä—Ç–µ:
   ‚Äì –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–ø–ª–æ–≤—É—é –∫–∞—Ä—Ç—É (heatmap) –ø–æ–≤–µ—Ä—Ö –≥–æ—Ä–æ–¥–∞ —Å –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —ç—Ç–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.
   ‚Äì —á–µ–º –±–æ–ª—å—à–µ –ª—é–¥–µ–π —Å–º–æ—Ç—Ä–µ–ª–∏ –∏–∑ —Ä–∞–π–æ–Ω–∞ ‚Üí —Ç–µ–º ¬´–≥–æ—Ä—è—á–µ–µ¬ª —Ü–≤–µ—Ç (–∂—ë–ª—Ç–æ-–∫—Ä–∞—Å–Ω—ã–π).
   ‚Äì –≤–Ω–∏–∑—É –ø–æ–¥ –∫–∞—Ä—Ç–æ–π ‚Äì —Å–ø–∏—Å–æ–∫ —Ç–æ–ø-—Ä–∞–π–æ–Ω–æ–≤/–∑–æ–Ω —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏.

–ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
1) backend-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π,
2) API –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—é,
3) frontend-heatmap –Ω–∞ Leaflet,
4) –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤ –∫–∞–±–∏–Ω–µ—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞ (–≥–ª–∞–∑–∏–∫ ‚Üí –º–æ–¥–∞–ª–∫–∞/—ç–∫—Ä–∞–Ω).

---

### 1. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

–°–¥–µ–ª–∞–π –Ω–æ–≤—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤ MongoDB: `AdView`.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ (Mongoose):

AdView:
- _id
- adId: ObjectId (—Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ)
- viewerId?: ObjectId (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω; –µ—Å–ª–∏ –≥–æ—Å—Ç—å ‚Äì null)
- viewedAt: Date
- location: {
    type: "Point",
    coordinates: [lng, lat]
  } | null     // –µ—Å–ª–∏ –µ—Å—Ç—å –≥–µ–æ
- city?: string
- district?: string    // —Å—Ç—Ä–æ–∫–∞ —Ä–∞–π–æ–Ω–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –æ–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- source: "feed" | "map" | "search" | "direct"  // –æ—Ç–∫—É–¥–∞ –ø–µ—Ä–µ—à—ë–ª
- userAgent?: string   // –ø–æ –∂–µ–ª–∞–Ω–∏—é
- meta?: {}            // —Ä–µ–∑–µ—Ä–≤

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è (`GET /api/ads/:id` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥) —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å AdView:
  ‚Äì adId ‚Äì —Ç–µ–∫—É—â–µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è,
  ‚Äì viewerId ‚Äì –∏–∑ —Ç–æ–∫–µ–Ω–∞, –µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω,
  ‚Äì location ‚Äì –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞–ª –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (lat/lng) –∏–ª–∏ –≥–µ–æ–∑–æ–Ω—É,
  ‚Äì city/district ‚Äì –µ—Å–ª–∏ –º–æ–∂–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã –∑–æ–Ω –∏–ª–∏ —á–µ—Ä–µ–∑ –Ω–∞—à geo-—Å–ª–æ–π).
- –ù–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –≤–ª–∞–¥–µ–ª—å—Ü–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–ø—Ä–æ–¥–∞–≤—Ü–∞) –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–ø—Ä–æ—Å–∞.
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å:
  ‚Äì { adId: 1, viewedAt: -1 }
  ‚Äì 2dsphere –¥–ª—è location.

–í–∞–∂–Ω–æ: –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ ¬´–∑–∞–±–ª—é—Ä–∏—Ç—å¬ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–∫—Ä—É–≥–ª–∏—Ç—å lat/lng –¥–æ ~150‚Äì300–º —Å–µ—Ç–∫–∏).

---

### 2. API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è heatmap –ø–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—é

–ù–æ–≤—ã–π –∑–∞—â–∏—â—ë–Ω–Ω—ã–π endpoint (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏ –∞–¥–º–∏–Ω):

GET /api/seller/ads/:adId/heatmap

–õ–æ–≥–∏–∫–∞:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äì –≤–ª–∞–¥–µ–ª–µ—Ü –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–∏–ª–∏ admin/super_admin).
- –ü—Ä–∏–Ω—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  ‚Äì from?: –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ—Å–ª–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü),
  ‚Äì to?: –¥–∞—Ç–∞ –∫–æ–Ω—Ü–∞,
  ‚Äì granularity?: "point" | "grid" | "district" (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "grid").

–í–µ—Ä–Ω—É—Ç—å –¥–≤–∞ –±–ª–æ–∫–∞:

1) `points` ‚Äì —Å—ã—Ä—ã–µ —Ç–æ—á–∫–∏ –¥–ª—è heatmap:
   [
     {
       lat: number,
       lng: number,
       weight: number  // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
     },
     ...
   ]

   –≠—Ç–∏ —Ç–æ—á–∫–∏ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–∞–∫:
   ‚Äì —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ ¬´–æ–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–º¬ª –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º (gridSize ~ 300‚Äì500–º), —á—Ç–æ–±—ã –Ω–µ —Å–≤–µ—Ç–∏—Ç—å —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å.

2) `areas` ‚Äì –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ —Ä–∞–π–æ–Ω–∞–º/–∑–æ–Ω–∞–º:
   [
     {
       district: "–í–µ–ª–∏–∫–∞—è –• –≤—É–ª–∏—Ü–∞ / –ë—Ä–µ—Å—Ç—Å–∫–∏–π —Ä–∞–π–æ–Ω",
       views: 57,
       share: 0.34  // –¥–æ–ª—è –æ—Ç –≤—Å–µ—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
     },
     ...
   ]

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ø—Ä–∏–º–µ—Ä–Ω–æ):
- –ù–∞–π—Ç–∏ –≤—Å–µ AdView –¥–ª—è adId –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ –¥–∞—Ç.
- –î–ª—è `points`:
  ‚Äì –æ–∫—Ä—É–≥–ª–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫ —Å–µ—Ç–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —à–∞–≥ 0.003¬∞ –ø–æ lat/lng),
  ‚Äì —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø–∞—Ä–µ (latRounded, lngRounded),
  ‚Äì –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.
- –î–ª—è `areas`:
  ‚Äì —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ district –∏–ª–∏ –ø–æ –Ω–∞—à–µ–π geo-–∑–æ–Ω–µ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–ª—è zoneId/zoneName),
  ‚Äì –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –¥–æ–ª—é.

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:

{
  adId: "‚Ä¶",
  totalViews: 123,
  timeRange: { from, to },
  points: [...],
  areas: [...]
}

---

### 3. Frontend: —ç–∫—Ä–∞–Ω/–º–æ–¥–∞–ª–∫–∞ heatmap

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ Leaflet + React, —á—Ç–æ –∏ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞—Ä—Ç–µ.

–°–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä:
- `AdHeatmapModal.tsx` (–µ—Å–ª–∏ —ç—Ç–æ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ)
–∏–ª–∏
- `AdHeatmapScreen.tsx` (–µ—Å–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω –≤ –∫–∞–±–∏–Ω–µ—Ç–µ).

UI-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

1) –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ –Ω–∞ –≥–ª–∞–∑–∏–∫ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü–∞:
   ‚Äì –ø–æ–∫–∞–∑–∞—Ç—å tooltip/–æ–Ω–±–æ—Ä–¥–∏–Ω–≥:
     ¬´–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å, –∏–∑ –∫–∞–∫–∏—Ö —Ä–∞–π–æ–Ω–æ–≤ –≥–æ—Ä–æ–¥–∞ –ª—é–¥–∏ —á–∞—â–µ —Å–º–æ—Ç—Ä—è—Ç –≤–∞—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ¬ª.
   ‚Äì –∑–∞—Ç–µ–º –æ—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É/—ç–∫—Ä–∞–Ω.

2) –í –º–æ–¥–∞–ª–∫–µ:
   ‚Äì –∑–∞–≥–æ–ª–æ–≤–æ–∫: ¬´–ö–∞—Ä—Ç–∞ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—é¬ª
   ‚Äì –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫: –∫—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–æ–±—Ä–µ–∑–∞—Ç—å –¥–æ 1 —Å—Ç—Ä–æ–∫–∏).
   ‚Äì —Å–µ–ª–µ–∫—Ç–æ—Ä –ø–µ—Ä–∏–æ–¥–∞:
     ‚Ä¢ 7 –¥–Ω–µ–π
     ‚Ä¢ 30 –¥–Ω–µ–π
     ‚Ä¢ –í—Å—ë –≤—Ä–µ–º—è
   ‚Äì —Å–∞–º–∞ –∫–∞—Ä—Ç–∞:
     ‚Ä¢ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ –≥–æ—Ä–æ–¥—É/–≥–µ–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è,
     ‚Ä¢ –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç—ã –Ω–∞–ª–æ–∂–µ–Ω–∞ —Ç–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `points`.

3) –ü–æ–¥ –∫–∞—Ä—Ç–æ–π:
   ‚Äì ¬´–¢–æ–ø —Ä–∞–π–æ–Ω–æ–≤¬ª:
     ‚Ä¢ —Ç–∞–±–ª–∏—Ü–∞/—Å–ø–∏—Å–æ–∫:
        1. –¶–µ–Ω—Ç—Ä ‚Äì 45% –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
        2. –Æ–≥–æ-–ó–∞–ø–∞–¥ ‚Äì 22%
        3. –ö–æ–≤–∞–ª—ë–≤–æ ‚Äì 13%
     ‚Ä¢ —É –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ ‚Äì –Ω–µ–±–æ–ª—å—à–∞—è —Ü–≤–µ—Ç–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞-–±–∞—Ä.

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω heatmap –¥–ª—è Leaflet:
  ‚Äì leaflet.heat (https://github.com/Leaflet/Leaflet.heat)
  ‚Äì –∏ React-–æ–±—ë—Ä—Ç–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, react-leaflet-heatmap-layer –∏–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ—é).

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
npm install leaflet.heat react-leaflet-heatmap-layer

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã:

<HeatmapLayer
   fitBoundsOnLoad
   fitBoundsOnUpdate
   points={points.map(p => ({
       lat: p.lat,
       lng: p.lng,
       intensity: p.weight
   }))}
   longitudeExtractor={p => p.lng}
   latitudeExtractor={p => p.lat}
   intensityExtractor={p => p.intensity}
/>

–í–µ—Ä—Ö–Ω—è—è –ª–æ–≥–∏–∫–∞:

- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏:
   ‚Äì –≤—ã–∑—ã–≤–∞—Ç—å GET /api/seller/ads/:adId/heatmap —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º (7 –¥–Ω–µ–π).
- –ü—Ä–∏ —Å–º–µ–Ω–µ –ø–µ—Ä–∏–æ–¥–∞:
   ‚Äì –¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å heatmap –∏ —Å–ø–∏—Å–æ–∫ —Ä–∞–π–æ–Ω–æ–≤.
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–∞–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, < 5 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤):
   ‚Äì –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç: ¬´–ü–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞—Ä—Ç—ã –∏–Ω—Ç–µ—Ä–µ—Å–∞. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–æ–±–µ—Ä—ë—Ç –±–æ–ª—å—à–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤¬ª.

---

### 4. –°–≤—è–∑–∫–∞ —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü–∞

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ ¬´–ú–æ—è –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è¬ª (SellerAdCard / SellerAdDetails):

- –í —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –±–ª–æ–∫–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
  ‚Äì –¥–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫—É üëÅ —Å —Å—á—ë—Ç—á–∏–∫–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤.
  ‚Äì –ø—Ä–∏ –∫–ª–∏–∫–µ:
      `openHeatmapModal(ad.id)`

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

const [selectedAdForHeatmap, setSelectedAdForHeatmap] = useState<Ad | null>(null);

- –ú–æ–¥–∞–ª–∫–∞:

{selectedAdForHeatmap && (
   <AdHeatmapModal
      ad={selectedAdForHeatmap}
      onClose={() => setSelectedAdForHeatmap(null)}
   />
)}

- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏:
  ‚Äì –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ localStorage/AsyncStorage —Ñ–ª–∞–≥ `heatmapOnboardingShown` –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.

---

### 5. –ü–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è:

1) –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å—ã—Ä—ã–µ —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
   ‚Äì –≤—Å–µ —Ç–æ—á–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–∂–µ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã/–æ–∫—Ä—É–≥–ª–µ–Ω—ã –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (grid).
   ‚Äì —Ä–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏ –ø–æ–¥–æ–±—Ä–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ–ª—å–∑—è –±—ã–ª–æ ¬´–≤—ã—á–∏—Å–ª–∏—Ç—å¬ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ–º.

2) –ê–≥—Ä–µ–≥–∞—Ü–∏—è:
   ‚Äì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MongoDB aggregation pipeline.
   ‚Äì –Ω–µ –≥—Ä—É–∑–∏—Ç—å –≤—Å–µ AdView –≤ –ø–∞–º—è—Ç—å.
   ‚Äì –¥–æ–±–∞–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º (max, –Ω–∞–ø—Ä–∏–º–µ—Ä, 6 –º–µ—Å—è—Ü–µ–≤).

3) –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   ‚Äì –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –º–æ–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç heatmap (Redis –∏–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è —Å –≥–æ—Ç–æ–≤–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π) –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

---

### 6. –ß—Ç–æ –Ω—É–∂–Ω–æ –≤—ã–¥–∞—Ç—å –≤ –æ—Ç–≤–µ—Ç–µ

–°–¥–µ–ª–∞–π:

1) Mongoose-–º–æ–¥–µ–ª—å `AdView` –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞).
2) –ù–æ–≤—ã–π endpoint GET /api/seller/ads/:adId/heatmap —Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º aggregation pipeline.
3) React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç heatmap-–º–æ–¥–∞–ª–∫–∏/—ç–∫—Ä–∞–Ω–∞:
   ‚Äì –∫–∞—Ä—Ç–∞ —Å heatmap,
   ‚Äì –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞,
   ‚Äì —Å–ø–∏—Å–æ–∫ —Ç–æ–ø-—Ä–∞–π–æ–Ω–æ–≤.
4) –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –≤ SellerAdCard (–∏–∫–æ–Ω–∫–∞ üëÅ ‚Üí –æ—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É).
5) –ö—Ä–∞—Ç–∫—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é/README –±–ª–æ–∫ –ø–æ —ç—Ç–æ–π —Ñ–∏—á–µ.

–ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–º, —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –≥–æ—Ç–æ–≤—ã–º –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –º–æ—ë–º –ø—Ä–æ–µ–∫—Ç–µ.
