 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/docs/ketmar_geo_home_screen.md b/docs/ketmar_geo_home_screen.md
new file mode 100644
index 0000000000000000000000000000000000000000..6430f9a0b4c147eee3cd6851b67f5c7407b3b4ae
--- /dev/null
+++ b/docs/ketmar_geo_home_screen.md
@@ -0,0 +1,106 @@
+# KETMAR GEO‑Home Screen Concept
+
+## Vision
+A dynamic, geo‑personalized home screen ("не Яндекс Go, а KETMAR GEO‑HOME SCREEN") that surfaces what is happening nearby: by district, user interests, neighbor popularity, seasonality, local farmers, free giveaways, discounts within 1–3 km, and fresh listings.
+
+## Dynamic Block Logic (varies by geozone)
+1. **Фермерские товары рядом** — молочка, ягоды/овощи, домашние продукты; яркие круглые иконки в духе Yandex Go Lavka.
+2. **Выпечка / Домашняя кухня** — пироги, торты, пиццы, полуфабрикаты.
+3. **Отдам Даром рядом (ТОП по удержанию)** — выдаём раздачи в радиусе 3 км, снизу ссылка «Показать всё».
+4. **Сезонные ярмарки** — автоподбор по дате, ближайшим праздникам и региональному спросу (зима, весна, Пасха, тюльпаны, осень).
+5. **Популярное сейчас** — сортировка по просмотрам и сохранениям в районе.
+6. **Скидки рядом** — объявления с пониженной ценой.
+7. **Новые объявления 24ч** — авто‑сортировка по расстоянию.
+8. **Категории‑ярлыки** — 3 ряда иконок: Фермеры, Еда, Выпечка, Стройматериалы, Товары для дома, Хендмейд, Доставка, Отдам даром, Сезон.
+
+## UI Structure (в стиле Yandex Go)
+- **Header (фиксированный):** локация «Вы в районе: Мичурино» + стрелка выбора; аватар справа.
+- **Иконки сервисов:** 3×4 сетка, круглые блоки с мягкими тенями и яркими 3D‑иконками (фермеры, выпечка, магазины, еда, стройка, хендмейд, отдам даром, ярмарка).
+- **Поиск:** плоское поле «Что ищете?» с лупой слева и фильтром справа, серый фон, радиус 18px.
+- **Баннеры (2–3 шт.):** минимализм, крупный текст, темы — сезонная распродажа, фермеры недели, отдам даром рядом, популярное сейчас, скидки −20% в радиусе 1 км.
+- **Ленты карточек:** секции «Популярное в районе», «Новое рядом», «Фермеры рекомендуют», «Отдам Даром — рядом».
+- **Нижняя навигация:** Главная / Лента / Мои / Избранное / Профиль; стиль miniapp.
+
+## Prompt #1 — Figma / Design Handoff
+Создать дизайн главной страницы KETMAR Market в стиле Yandex Go с неоновой айдентикой KETMAR, мягкими скруглениями и 3D‑иконками. Структура:
+- Header: локация «Ваш район: Мичурино», иконка смены, аватар справа.
+- 3 ряда по 4 круглых элемента с мягкими тенями и 3D‑иконками (еда, фермеры, выпечка, ярмарка, отдам даром, стройка, хендмейд).
+- Строка поиска: серый фон, радиус 18px, лупа слева, фильтр справа.
+- Баннеры: фокус на фермерские товары, сезон, скидки, ярмарки; минимум шума, крупные заголовки.
+- Секции‑ленты: «Фермерские товары рядом», «Популярное сейчас», «Отдам даром рядом», «Новое рядом».
+- Нижняя навигация как в текущем miniapp; блоки адаптируются по высоте под miniapp.
+
+### Full Figma Prompt — Главная страница KETMAR Market (Yandex Go style + GEO логика)
+- Платформы: iOS 15+, Telegram Mini App WebView, ширина 390px (iPhone 12/13/14/15).
+- Стиль: чистый, мягкий, светлый; скругления 18–22px; тени 12–24px; неоновые акценты KETMAR; динамика Яндекс Go.
+- Цвета: белый `#FFFFFF`, серый фон `#F5F6F7`, тёмный текст `#1C1C1E`, акцент `KETMAR-Blue #1677FF`, неоновое свечение `rgba(0, 122, 255, 0.24)`, доп. акценты — зелёный `#34C759`, оранжевый `#FF9500`.
+- Типографика: SF Pro Display / Inter / Roboto; размеры 14 / 16 / 18 / 24 / 28.
+
+**Структура экрана (с расстояниями):**
+1. **Верхний header (фиксированный)**
+   - Высота 92px, отступ сверху 10px.
+   - Слева: гео-иконка + текст «Ваш район: Мичурино», шрифт 17 semibold; справа: круглый аватар 40px.
+   - Под заголовком кнопка «Изменить локацию» со стрелкой вправо. Горизонтальный фрейм, выравнивание по центру.
+2. **Главные сервисы (иконки)**
+   - Высота секции 220px; сетка 3×4; отступы 16px; между иконками 12px.
+   - Карточка 84×84px, скругление 22px, тень 0 8 24 rgba(0,0,0,0.08).
+   - Внутри: 3D‑иконка + подпись 12–13pt medium.
+   - 12 иконок: Фермеры, Выпечка, Еда, Отдам даром, Ярмарка, Стройматериалы, Хендмейд, Животные, Магазины, Техника, Услуги, Авто.
+   - Стиль иконок: яркие 3D (Яндекс Go + Apple‑style).
+3. **Строка поиска**
+   - Высота 52px; отступы 16px; фон `#F2F3F5`; радиус 18px.
+   - Лупа слева (24px), текст «Что ищете?» 16pt regular, фильтр справа (22px).
+4. **Карусель баннеров**
+   - Высота 160px; отступы 16px; между баннерами 12px; скругление 22px.
+   - Баннеры яркие, как в Яндекс Лавка. Создать 3 варианта:
+     1) «Сезонная ярмарка» — нежно‑голубой + розовый, тюльпаны/сезон.
+     2) «Фермерские товары рядом» — зелёный, натуральные фото (клубника, молоко, овощи).
+     3) «Отдам даром в вашем районе» — оранжево‑фиолетовый, графика коробки подарков.
+5. **Секции‑ленты**
+   - Каждая: заголовок (semibold) + горизонтальная мини‑лента.
+   - Секции: (1) Фермерские товары рядом — карточка 140×220, скругление 18px, фото 70% блока; (2) Популярное сейчас — карточки 130×200; (3) Отдам даром рядом — яркие карточки; (4) Новые объявления рядом — фото как TikTok Shorts.
+6. **Нижнее меню**
+   - Сохранить текущий стиль KETMAR; усилить активную подсветку; добавить неоновый glow под активным табом; иконки 26px.
+
+**Расстояния:** между крупными секциями 22px; между заголовком секции и контентом 8px; внешний паддинг 16px; скругления 18–22px.
+
+**Темы:**
+- Светлая (основная): как указано в палитре.
+- Тёмная: фон `#0E0E10`, карточки `#1A1A1C`, текст `#FFFFFF`, яркие кремовые/оранжевые/лимонные иконки.
+
+**Прототип:** кликабельный; скролл вниз (smooth); анимация появления секций (fade+up 80ms); анимация карточек при тапе (scale 0.96→1.02→1.00); горизонтальные карусели (free scroll).
+
+**Генерация ассетов (отдельный фрейм):**
+- 12 сервисных 3D‑иконок, 8 категорий товаров, 6 сезонных баннеров; стиль Yandex Go + Apple SF Symbols 3D Fusion.
+
+**Итог в Figma:**
+- Полный экран главной страницы, вариант экрана при скролле 1000px, dark mode, набор 3D‑иконок, набор баннеров, кликабельный прототип с анимациями.
+
+## Prompt #2 — Backend: Personalized Home Feed
+Endpoint: `GET /api/home-feed?lat=&lng=&userId=` возвращает JSON:
+```json
+{
+  "location": "Мичурино",
+  "blocks": [
+    { "type": "categories", "items": [...] },
+    { "type": "banner", "title": "Сезонная ярмарка", "items": [...] },
+    { "type": "farm_nearby", "items": [...] },
+    { "type": "free", "items": [...] },
+    { "type": "popular_nearby", "items": [...] },
+    { "type": "discounts", "items": [...] },
+    { "type": "new_nearby", "items": [...] }
+  ]
+}
+```
+Блоки определяются геозоной, популярностью, сезонностью, интересами пользователя и будущими сигналами покупок/просмотров.
+
+## Prompt #3 — Frontend: MiniApp/Web Screen
+- Экран строится по ответу home-feed API, рендерит блоки по типу.
+- Поддерживает баннеры и горизонтальные списки для каруселей.
+- Адаптив под miniapp, повторяет структуру и сетку иконок/секций.
+
+## Why This Matters
+- Удержание через эффект «вот что рядом со мной происходит».
+- Монетизация через баннеры и выделение товаров.
+- Гибкие сезонные кампании (8 марта, Новый год, ярмарки, тюльпаны).
+- Уникальный интерфейс на уровне Yandex Go.
 
EOF
)